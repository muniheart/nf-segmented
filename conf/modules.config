env.APPTAINER_MESSAGELEVEL=5
env.SINGULARITY_MESSAGELEVEL=5

process {
    withName: SQUASH_WORK {
        publishDir = [
            [
                path: { "${params.outdir}/${task.process.tokenize(':')[-1].toLowerCase()}" },
                pattern: '*.sqfs',
                mode: 'symlink',
                overwrite: true,
            ]
        ]
    }

    withName: NFCORE_DEMO {
        containerOptions = {
            [
                container_opts,
                "--env NXF_CACHE_DIR=/nextflow",
                "-B ${cache_dir}:/nextflow",
            ].join(' ')
        }
    }
}
